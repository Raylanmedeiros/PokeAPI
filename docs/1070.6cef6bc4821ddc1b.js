"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1070],{1070:(T,f,r)=>{r.r(f),r.d(f,{PokemonListPageModule:()=>y});var s=r(9420),c=r(2881),P=r(4341),t=r(1360);let d=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[c.MD,P.YN,s.bv]}),a})();var u=r(5207),p=r(467),_=r(7643);let h=(()=>{var e;class a{constructor(o){this.http=o,this.baseUrl="https://pokeapi.co/api/v2"}getPokemonList(o=0,i=20){return this.http.get(`${this.baseUrl}/pokemon?offset=${o}&limit=${i}`)}getPokemonDetails(o){return this.http.get(`${this.baseUrl}/pokemon/${o}`)}}return(e=a).\u0275fac=function(o){return new(o||e)(t.KVO(_.Qq))},e.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),a})();const v=()=>[];function F(e,a){1&e&&(t.qex(0),t.j41(1,"div",11),t.nrm(2,"img",12),t.k0s(),t.bVm())}function b(e,a){if(1&e){const n=t.RV6();t.j41(0,"ion-item",14),t.bIt("click",function(){const i=t.eBV(n).$implicit,l=t.XpG(2);return t.Njj(l.openDetail(i))}),t.j41(1,"ion-avatar",15),t.nrm(2,"img",16),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"titlecase"),t.k0s(),t.j41(6,"ion-button",17),t.bIt("click",function(i){const l=t.eBV(n).$implicit;return t.XpG(2).toggleFavorite(l),t.Njj(i.stopPropagation())}),t.nrm(7,"ion-icon",18),t.k0s()()}if(2&e){const n=a.$implicit;t.R7$(2),t.Y8G("src",n.image,t.B4B)("alt",n.name),t.R7$(2),t.Lme("#",n.order," - ",t.bMT(5,5,n.name),""),t.R7$(3),t.Y8G("name",n.favorite?"star":"star-outline")}}function L(e,a){if(1&e&&(t.j41(0,"ion-list"),t.DNE(1,b,8,7,"ion-item",13),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.pokemons)}}function j(e,a){if(1&e){const n=t.RV6();t.j41(0,"ion-button",20),t.bIt("click",function(){const i=t.eBV(n).index,l=t.XpG(2);return t.Njj(l.goToPage(i+1))}),t.EFF(1),t.k0s()}if(2&e){const n=a.index,o=t.XpG(2);t.Y8G("color",o.page===n+1?"primary":"medium"),t.R7$(),t.SpI(" ",n+1," ")}}function $(e,a){if(1&e&&(t.qex(0),t.DNE(1,j,2,2,"ion-button",19),t.bVm()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",t.lJ4(1,v).constructor(n.totalPages))}}const G=[{path:"",component:(()=>{var e;class a{constructor(o){this.pokeapi=o,this.pokemons=[],this.page=1,this.limit=20,this.loading=!1,this.favorites=[],this.total=0,this.totalPages=0}ngOnInit(){this.loadFavorites(),this.loadPokemons()}loadFavorites(){this.favorites=JSON.parse(localStorage.getItem("favorites")||"[]")}saveFavorites(){localStorage.setItem("favorites",JSON.stringify(this.favorites))}isFavorite(o){return this.favorites.some(i=>i.name===o.name)}loadPokemons(){var o=this;return(0,p.A)(function*(){o.loading=!0,o.pokeapi.getPokemonList((o.page-1)*o.limit,o.limit).subscribe(function(){var l=(0,p.A)(function*(m){const I=yield Promise.all(m.results.map(function(){var R=(0,p.A)(function*(g){const k=yield o.pokeapi.getPokemonDetails(g.name).toPromise();return{name:g.name,order:k.id,image:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${k.id}.png`,favorite:o.isFavorite({name:g.name})}});return function(g){return R.apply(this,arguments)}}()));o.pokemons=I,o.total=m.count,o.totalPages=Math.ceil(o.total/o.limit),o.loading=!1});return function(m){return l.apply(this,arguments)}}())})()}extractIdFromUrl(o){const i=o.split("/").filter(Boolean);return+i[i.length-1]}nextPage(){this.page<this.totalPages&&(this.page++,this.loadPokemons())}prevPage(){this.page>1&&(this.page--,this.loadPokemons())}goToPage(o){o>=1&&o<=this.totalPages&&(this.page=o,this.loadPokemons())}toggleFavorite(o){this.isFavorite(o)?(this.favorites=this.favorites.filter(i=>i.name!==o.name),o.favorite=!1):(this.favorites.push({order:o.order,name:o.name,image:o.image}),o.favorite=!0),this.saveFavorites()}openDetail(o){}}return(e=a).\u0275fac=function(o){return new(o||e)(t.rXU(h))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-pokemon-list"]],standalone:!1,decls:21,vars:7,consts:[[3,"translucent"],["slot","end"],["routerLink","/favorites","routerDirection","forward"],["name","star","slot","icon-only"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],[1,"ion-justify-content-center","ion-padding"],["size","12",1,"ion-text-center",2,"margin-bottom","8px"],[3,"click","disabled"],[1,"ion-text-center","ion-padding"],["src","assets/pokeball-loading.gif","alt","Loading...",2,"width","15rem","height","15rem"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],[3,"src","alt"],["fill","clear","slot","end","color","warning",3,"click"],[3,"name"],["size","small",3,"color","click",4,"ngFor","ngForOf"],["size","small",3,"click","color"]],template:function(o,i){1&o&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Pok\xe9mons"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.nrm(6,"ion-icon",3),t.k0s()()()(),t.j41(7,"ion-content",4)(8,"ion-header",5)(9,"ion-toolbar")(10,"ion-title",6),t.EFF(11,"Pok\xe9mons"),t.k0s()()(),t.DNE(12,F,3,0,"ng-container",7)(13,L,2,1,"ion-list",7),t.j41(14,"ion-row",8)(15,"ion-col",9),t.DNE(16,$,2,2,"ng-container",7),t.k0s(),t.j41(17,"ion-button",10),t.bIt("click",function(){return i.prevPage()}),t.EFF(18,"Anterior"),t.k0s(),t.j41(19,"ion-button",10),t.bIt("click",function(){return i.nextPage()}),t.EFF(20,"Pr\xf3xima"),t.k0s()()()),2&o&&(t.Y8G("translucent",!0),t.R7$(7),t.Y8G("fullscreen",!0),t.R7$(5),t.Y8G("ngIf",i.loading),t.R7$(),t.Y8G("ngIf",!i.loading),t.R7$(3),t.Y8G("ngIf",i.totalPages>1),t.R7$(),t.Y8G("disabled",1===i.page),t.R7$(2),t.Y8G("disabled",i.page===i.totalPages))},dependencies:[s.mC,s.Jm,s.QW,s.hU,s.W9,s.eU,s.iq,s.uz,s.he,s.nf,s.ln,s.BC,s.ai,s.N7,c.Sq,c.bT,u.Wk,c.PV],encapsulation:2}),a})()}];let x=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[u.iI.forChild(G),u.iI]}),a})(),y=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[s.bv,c.MD,P.YN,d,x]}),a})()}}]);